(this.webpackJsonpauctions=this.webpackJsonpauctions||[]).push([[0],{75:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var c=n(1),r=n(30),a=n(11),s=n(83),i=n(56),o=(n(66),n(78),n(79),i.a.initializeApp({apiKey:"AIzaSyCIWeJdjo6MrHeoKFtsmJPqGvZAD7k3Gok",authDomain:"auctions-ae6be.firebaseapp.com",projectId:"auctions-ae6be",storageBucket:"auctions-ae6be.appspot.com",messagingSenderId:"981182870360",appId:"1:981182870360:web:7b9f4415bc5258cf07eb2d"})),l=i.a.firestore.FieldValue.serverTimestamp,u=o.firestore(),j=o.storage(),b=o.auth(),d=n(2),O=Object(c.createContext)(),m=function(e){var t=e.children,n=Object(c.useState)(null),r=Object(a.a)(n,2),s=r[0],i=r[1],o=Object(c.useState)(!0),l=Object(a.a)(o,2),j=l[0],m=l[1],x=Object(c.useState)(""),h=Object(a.a)(x,2),f=h[0],p=h[1];return Object(c.useEffect)((function(){return b.onAuthStateChanged((function(e){i(e),m(!1)}))}),[]),Object(c.useEffect)((function(){var e=setTimeout((function(){return p("")}),5e3);return function(){return clearTimeout(e)}}),[f]),Object(d.jsx)(O.Provider,{value:{currentUser:s,register:function(e,t){return b.createUserWithEmailAndPassword(e,t)},login:function(e,t){return b.signInWithEmailAndPassword(e,t)},logout:function(){return b.signOut()},bidAuction:function(e,t){if(!s)return p("Please login first");var n=Math.floor(t);return u.collection("auctions").doc(e).update({curPrice:n,curWinner:s.email})},endAuction:function(e){return u.collection("auctions").doc(e).delete()},globalMsg:f},children:!j&&t})},x=n(38),h=n(19),f=n.n(h),p=n(26),v=n(89),g=n(90),y=n(84),N=n(57),w=n.n(N),C=function(e){var t=e.setAuction,n=Object(c.useState)(!1),r=Object(a.a)(n,2),i=r[0],o=r[1],l=Object(c.useState)(""),u=Object(a.a)(l,2),j=u[0],b=u[1],m=Object(c.useRef)(),x=Object(c.useRef)(),h=Object(c.useRef)(),N=Object(c.useRef)(),C=Object(c.useRef)(),k=Object(c.useContext)(O).currentUser,S=function(){return o(!1)},A=["image/png","image/jpeg","image/jpg"],L=function(){var e=Object(p.a)(f.a.mark((function e(n){var c,r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),b(""),A.includes(C.current.files[0].type)){e.next=4;break}return e.abrupt("return",b("Please use a valid image"));case 4:c=w()().add(N.current.value,"hours").format(),r={email:k.email,title:m.current.value,desc:x.current.value,curPrice:h.current.value,duration:c,itemImage:C.current.files[0]},t(r),S();case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"col d-flex justify-content-center my-3",children:Object(d.jsx)("div",{onClick:function(){return o(!0)},className:"btn btn-outline-secondary mx-2",children:"+ Auction"})}),Object(d.jsx)(v.a,{centered:!0,show:i,onHide:S,children:Object(d.jsxs)("form",{onSubmit:L,children:[Object(d.jsx)(v.a.Header,{children:Object(d.jsx)(v.a.Title,{children:"Create Auction"})}),Object(d.jsxs)(v.a.Body,{children:[j&&Object(d.jsx)(s.a,{variant:"danger",children:j}),Object(d.jsxs)(g.a.Group,{className:"mb-3",children:[Object(d.jsx)(g.a.Label,{children:"Product Name"}),Object(d.jsx)(g.a.Control,{type:"text",required:!0,ref:m})]}),Object(d.jsxs)(g.a.Group,{className:"mb-3",children:[Object(d.jsx)(g.a.Label,{children:"Product Description"}),Object(d.jsx)(g.a.Control,{type:"text",required:!0,ref:x})]}),Object(d.jsxs)(g.a.Group,{className:"mb-3",children:[Object(d.jsx)(g.a.Label,{children:"Starting Bid"}),Object(d.jsx)(g.a.Control,{type:"number",required:!0,ref:h})]}),Object(d.jsxs)(g.a.Group,{className:"mb-3",children:[Object(d.jsx)(g.a.Label,{children:"Product Duration in hours"}),Object(d.jsx)(g.a.Control,{type:"number",required:!0,ref:N,min:"1"})]}),Object(d.jsxs)(g.a.Group,{className:"mb-3",children:[Object(d.jsx)(g.a.Label,{children:"Seller"}),Object(d.jsx)(g.a.Control,{type:"text",value:k.email,readOnly:!0,id:"seller"})]}),Object(d.jsxs)(g.a.Group,{className:"mb-3",children:[Object(d.jsx)(g.a.Label,{children:"Product Image"}),Object(d.jsx)(g.a.Control,{type:"file",size:"lg",label:"Select Product Image",required:!0,custom:!0,ref:C})]})]}),Object(d.jsxs)(v.a.Footer,{children:[Object(d.jsx)(y.a,{variant:"secondary",onClick:S,className:"btn btn-outline-secondary cancel",children:"Cancel"}),Object(d.jsx)(y.a,{variant:"primary",type:"submit",className:"btn btn-outline-secondary mx-2",children:"Submit"})]})]})})]})},k=n(93),S=n(85),A=n(86),L=n(61),P=n(59),T=n(60),R=function(e){var t=e.days,n=e.hours,c=e.minutes,r=e.seconds,a=e.completed,s=e.props;if(a)return null;return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)(k.a,{id:"card-container",className:"container col-md-4",style:{width:"20rem",height:"100%"},children:[Object(d.jsx)("div",{style:{height:"320px",backgroundImage:"url(".concat(s.item.imgUrl,")"),backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"},className:"w-100"}),Object(d.jsxs)(k.a.Body,{className:"card-body",children:[Object(d.jsx)(k.a.Title,{className:"lead display-6",children:s.item.title}),Object(d.jsx)(k.a.Text,{className:"",children:s.item.desc}),Object(d.jsxs)(k.a.Text,{className:"lead display-12",children:[t&&t+" d: ",n," hr: ",c," min: ",r," sec"]}),Object(d.jsxs)(S.a,{className:"sm-3",size:"md",children:[Object(d.jsx)(S.a.Text,{children:"Owner"}),Object(d.jsx)(S.a.Text,{children:s.owner?s.owner?s.item.email:(s.owner.item,s.item.email,""):Object(d.jsx)("div",{children:"Login First"})})]})]}),Object(d.jsxs)(A.a,{className:"list-group-flush d-flex jsutify-content-between align-item-center",children:[Object(d.jsx)(L.a,{children:Object(d.jsxs)(S.a,{className:"sm-3",size:"md",children:[Object(d.jsx)(S.a.Text,{className:"",children:"Top Bid"}),Object(d.jsxs)(S.a.Text,{className:"",children:["$",s.item.curPrice]})]})}),Object(d.jsx)(L.a,{children:Object(d.jsxs)(S.a,{className:"sm-3 ",size:"md",children:[Object(d.jsx)(S.a.Text,{className:"current-winner",children:"Winner"}),Object(d.jsx)(S.a.Text,{className:"current-winner",children:s.item.curWinner?Object(d.jsx)("div",{children:s.item.curWinner}):s.owner?"":Object(d.jsx)("div",{children:"Login First"})})]})})]}),Object(d.jsx)(k.a.Body,{children:Object(d.jsx)(k.a.Link,{style:{textDecoration:"none"},children:s.owner?s.owner.email===s.item.email?Object(d.jsx)("div",{onClick:function(){return s.endAuction(s.item.id)},className:"btn btn-outline-secondary cancel container",children:"Cancel Auction"}):s.owner.email===s.item.curWinner?Object(d.jsx)(S.a,{className:"sm-3",size:"md",children:Object(d.jsx)(S.a.Text,{className:"winner container",children:"You are the winner"})}):Object(d.jsx)("form",{onSubmit:function(e){return function(e){e.preventDefault(),s.item.curPrice<e.target[0].value&&s.bidAuction(s.item.id,e.target[0].value)}(e)},children:Object(d.jsxs)(S.a,{className:"input sm-3 ms-auto",onkeyup:"if(value<0){value = value * -1}","aria-valuemin":"1",children:[Object(d.jsx)(P.a,{placeholder:"Your bid goes here","aria-label":"Your bid goes here","aria-describedby":"basic-addon2",type:"number",min:"0",onSubmit:function(){return s.bidAuction(s.item.id,s.item.curPrice)}}),Object(d.jsx)(y.a,{variant:"outline-secondary",type:"submit",id:"button-addon2",children:"Bid"})]})}):Object(d.jsxs)(S.a,{className:"sm-3",children:[Object(d.jsx)(P.a,{placeholder:"Your bid goes here","aria-label":"Your bid goes here","aria-describedby":"basic-addon2",type:"number",min:"1"}),Object(d.jsx)(y.a,{variant:"outline-secondary",id:"button-addon2",onClick:function(){return s.bidAuction()},children:"Bid"})]})})})]})})},F=function(e){var t=e.item,n=t.duration,r=Object(c.useContext)(O),a=r.currentUser,s=r.bidAuction,i=r.endAuction;return Object(d.jsx)(T.a,{owner:a,date:n,bidAuction:s,endAuction:i,item:t,renderer:R})},G=n(88),I=function(e){var t=Object(c.useState)(0),n=Object(a.a)(t,2),r=n[0],s=n[1],i=Object(c.useState)(null),o=Object(a.a)(i,2),b=o[0],d=o[1];return Object(c.useState)((function(){var t=j.ref(e.itemImage.name),n=u.collection("auctions");t.put(e.itemImage).on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100;s(t)}),(function(e){console.log(e)}),Object(p.a)(f.a.mark((function c(){var r,a;return f.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,t.getDownloadURL();case 2:return r=c.sent,a=l(),delete e.itemImage,c.next=7,n.add(Object(x.a)(Object(x.a)({},e),{},{createdAt:a,imgUrl:r}));case 7:d(!0);case 8:case"end":return c.stop()}}),c)}))))}),[e]),{progress:r,isCompleted:b}},q=function(e){var t=e.auction,n=e.setAuction,r=I(t),a=r.progress,s=r.isCompleted;return Object(c.useEffect)((function(){s&&n(null)}),[s,n]),Object(d.jsx)(G.a.div,{style:{height:"5px",background:"#4c5c9c"},initial:{width:0},animate:{width:"".concat(a,"%")}})},B=function(){var e=Object(c.useState)(null),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useContext)(O),o=i.currentUser,l=i.globalMsg,j=function(e){var t=Object(c.useState)([]),n=Object(a.a)(t,2),r=n[0],s=n[1];return Object(c.useEffect)((function(){var t=u.collection(e).onSnapshot((function(e){var t=[];e.forEach((function(e){t.push(Object(x.a)(Object(x.a)({},e.data()),{},{id:e.id}))})),s(t)}));return function(){return t()}}),[e]),{docs:r}}("auctions").docs,b=Object(c.useState)([]),m=Object(a.a)(b,2),h=m[0],f=m[1];return Object(c.useEffect)((function(){f(j)}),[j]),Object(d.jsx)("div",{className:"py-5",children:Object(d.jsxs)("div",{className:"container",children:[n&&Object(d.jsx)(q,{auction:n,setAuction:r}),l&&Object(d.jsx)(s.a,{variant:"info",children:l}),o&&Object(d.jsx)(C,{setAuction:r}),j&&Object(d.jsx)("div",{className:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3",children:h.map((function(e){return Object(d.jsx)(F,{item:e},e.id)}))})]})})},E=n(91),D=n(87),U=n(92),z=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),o=Object(a.a)(i,2),l=o[0],u=o[1],j=Object(c.useRef)(),b=Object(c.useRef)(),m=Object(c.useContext)(O).login,x=function(){return r(!1)},h=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),u(""),e.prev=2,e.next=5,m(j.current.value,b.current.value);case 5:x(),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(2),u("Invalid login");case 11:case"end":return e.stop()}}),e,null,[[2,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{onClick:function(){return r(!0)},className:"btn btn-outline-secondary mx-2",children:"Login"}),Object(d.jsx)(v.a,{centered:!0,show:n,onHide:x,children:Object(d.jsxs)("form",{onSubmit:h,children:[Object(d.jsx)(v.a.Header,{children:Object(d.jsx)(v.a.Title,{children:"Login"})}),Object(d.jsxs)(v.a.Body,{children:[l&&Object(d.jsx)(s.a,{variant:"danger",children:l}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{children:"Email Address"}),Object(d.jsx)(g.a.Control,{type:"email",required:!0,ref:j})]}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{children:"Password"}),Object(d.jsx)(g.a.Control,{type:"password",required:!0,ref:b})]})]}),Object(d.jsxs)(v.a.Footer,{children:[Object(d.jsx)(y.a,{variant:"secondary",onClick:x,className:"btn btn-outline-secondary cancel",children:"Cancel"}),Object(d.jsx)(y.a,{variant:"primary",type:"submit",className:"btn btn-outline-secondary mx-2",children:"Login"})]})]})})]})},W=function(){var e=Object(c.useState)(!1),t=Object(a.a)(e,2),n=t[0],r=t[1],i=Object(c.useState)(""),o=Object(a.a)(i,2),l=o[0],u=o[1],j=Object(c.useRef)(),b=Object(c.useRef)(),m=Object(c.useRef)(),x=Object(c.useRef)(),h=Object(c.useRef)(),N=Object(c.useRef)(),w=Object(c.useContext)(O).register,C=function(){return r(!1)},k=function(){var e=Object(p.a)(f.a.mark((function e(t){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),u(""),h.current.value===N.current.value){e.next=4;break}return e.abrupt("return",u("Passwords does not match"));case 4:return e.prev=4,e.next=7,w(x.current.value,h.current.value);case 7:C(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(4),u(e.t0.message);case 13:case"end":return e.stop()}}),e,null,[[4,10]])})));return function(t){return e.apply(this,arguments)}}();return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{onClick:function(){return r(!0)},className:"btn btn-outline-secondary mx-2",children:"Register"}),Object(d.jsx)(v.a,{centered:!0,show:n,onHide:C,children:Object(d.jsxs)("form",{onSubmit:k,children:[Object(d.jsx)(v.a.Header,{children:Object(d.jsx)(v.a.Title,{children:"Register"})}),Object(d.jsxs)(v.a.Body,{children:[l&&Object(d.jsx)(s.a,{variant:"danger",children:l}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{children:"First Name"}),Object(d.jsx)(g.a.Control,{type:"text",required:!0,ref:b})]}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{children:"Last Name"}),Object(d.jsx)(g.a.Control,{type:"text",required:!0,ref:m})]}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{children:"Username"}),Object(d.jsx)(g.a.Control,{type:"text",required:!0,ref:j,minLength:"3",maxLength:"20"})]}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{children:"Email Address"}),Object(d.jsx)(g.a.Control,{type:"email",required:!0,ref:x})]}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{children:"Password"}),Object(d.jsx)(g.a.Control,{type:"password",required:!0,ref:h,minLength:"8"})]}),Object(d.jsxs)(g.a.Group,{children:[Object(d.jsx)(g.a.Label,{children:"Confirm Password"}),Object(d.jsx)(g.a.Control,{type:"password",required:!0,ref:N,minLength:"8"})]})]}),Object(d.jsxs)(v.a.Footer,{children:[Object(d.jsx)(y.a,{variant:"secondary",onClick:C,className:"btn btn-outline-secondary cancel",children:"Cancel"}),Object(d.jsx)(y.a,{variant:"primary",type:"submit",className:"btn btn-outline-secondary mx-2",children:"Register"})]})]})})]})},H=function(){var e=Object(c.useContext)(O),t=e.currentUser,n=e.logout;return Object(d.jsx)(E.a,{id:"navbar-container",className:"navbar sticky-top navbar-dark",expand:"lg",children:Object(d.jsxs)(D.a,{className:"container-fluid",children:[Object(d.jsx)(E.a.Brand,{href:"#",className:"navbar-brand ",id:"navbar-logo",children:"Auction"}),Object(d.jsx)(E.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(d.jsx)(E.a.Collapse,{id:"basic-navbar-nav",children:Object(d.jsxs)(U.a,{className:"ms-auto",children:[Object(d.jsx)(U.a,{className:"btn",children:t?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{className:"btn btn-outline-secondary mx-2 disabled",children:t.email})}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(z,{})})}),Object(d.jsx)(U.a,{className:"btn",children:t?Object(d.jsx)(d.Fragment,{children:Object(d.jsx)("div",{onClick:function(){return n()},className:"btn btn-outline-secondary mx-2",children:"Logout"})}):Object(d.jsx)(d.Fragment,{children:Object(d.jsx)(W,{})})})]})})]})})},Y=(n(75),function(){return Object(d.jsxs)(m,{children:[Object(d.jsx)(H,{}),Object(d.jsx)(B,{})]})});n(76);Object(r.render)(Object(d.jsx)(Y,{}),document.getElementById("root"))}},[[77,1,2]]]);
//# sourceMappingURL=main.f5288169.chunk.js.map